(window.MIP=window.MIP||[]).push({name:"mip-anim",func:function(){var e=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://c.mipcdn.com/static/v2/",i(i.s=331)}({0:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/classCallCheck"]},1:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/createClass"]},331:function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return _});var r=i(0),n=i.n(r),o=i(1),s=i.n(o),a=i(6),l=i.n(a),u=i(4),c=i.n(u),p=i(5),m=i.n(p),d=MIP,h=d.CustomElement,f=d.util.log("mip-ainm"),b=["alt","aria-label","aria-describedby","aria-labelledby"],A=["src","srcset"],g="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function y(e,t,i){i=Array.isArray(i)?i:[i];for(var r=0;r<i.length;r++){var n=i[r];e.hasAttribute(n)&&t.setAttribute(n,e.getAttribute(n))}}function v(e,t,i){var r=i?"mip-hidden":"mip-hide";void 0===t&&(t=e.classList.contains(r)),t?e.classList.remove(r):e.classList.add(r)}var _=function(e){function t(){return n()(this,t),l()(this,c()(t).apply(this,arguments))}return m()(t,e),s()(t,[{key:"build",value:function(){var e=this.element;this.hasLoaded=!1,this.placeholder=this.getPlaceholder(),this.img=new Image,this.img.setAttribute("decoding","async"),y(e,this.img,b),this.applyFillContent(this.img,!0),"img"===e.getAttribute("role")&&(e.removeAttribute("role"),f.error("设置 role=img 会导致屏幕阅读器不可用，请使用 alt 或者 ARIA 属性")),this.placeholder&&v(this.img,!1),e.appendChild(this.img)}},{key:"viewportCallback",value:function(e){this.hasLoaded&&this.updateInViewport(e)}},{key:"layoutCallback",value:function(){return y(this.element,this.img,A),function(e){if(!e.hasAttribute("src")&&"srcset"in e==0){var t=e.getAttribute("srcset"),i=/\S+/.exec(t);if(null==i)return;var r=i[0];e.setAttribute("src",r)}}(this.img),function(e){return new Promise(function(t){e.onload=function(){t(e)}})}(this.img)}},{key:"firstLayoutCompleted",value:function(){this.hasLoaded=!0,this.updateInViewport(!0)}},{key:"unlayoutCallback",value:function(){this.img.src=g,this.img.srcset=g,this.hasLoaded=!1}},{key:"updateInViewport",value:function(e){this.placeholder&&v(this.placeholder,!e,!0),v(this.img,e,!1)}},{key:"getPlaceholder",value:function(){var e=this.element,t=e.getPlaceholder();return t||(t=e.querySelector("mip-img"))&&f.warn("请使用 'placeholder' 属性指定占位符！"),t}}]),t}(h)},4:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/getPrototypeOf"]},5:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/inherits"]},6:function(e,t){e.exports=__mipComponentsWebpackHelpers__["@babel/runtime/helpers/esm/possibleConstructorReturn"]}});e.__esModule&&(e=e.default),e&&MIP.registerElement("mip-anim",e)}});