(window.MIP=window.MIP||[]).push({name:"mip-map",func:function(){define("mip-map/mip-map",["require","customElement"],function(t){function e(t,e){this.config=e,this.ele=t}var i=t("customElement").create();return e.prototype.show=function(){this.init(),this.append()},e.prototype.init=function(){var t=this.config,e=[],i={v:t.version||"2.0",ak:t.ak||"",t:(new Date).getTime(),callback:this.getCb()};for(var n in i)if(i.hasOwnProperty(n))e.push(n.concat("=",i[n]));this.mapUrl="https://api.map.baidu.com/api?"+e.join("&")},e.prototype.getCb=function(){return window.mapCallback=this.handleResult.bind(this),"mapCallback"},e.prototype.handleResult=function(){this.map=new BMap.Map(this.ele),this.map.centerAndZoom(new BMap.Point(116.404,39.915),11);var t=this.config,e=t.location;if(this.traverseAndConcat(e)&&e.city)this.handlePoint()},e.prototype.handlePoint=function(){var t=this,e=t.map,i=t.config,n=(i.location,new BMap.Geocoder,t.traverseAndConcat(i.location));if(n){var o=new BMap.LocalSearch(e,{renderOptions:{map:e}}),r={onSearchComplete:function(n){if(o.getStatus()===BMAP_STATUS_SUCCESS){var r=n.getPoi(0),a=r.point;if(r&&a){var l=new BMap.Marker(a);e.addOverlay(l),e.centerAndZoom(a,16),t.handleSyncOption({cfg:i,map:e,point:a,marker:l})}}}},o=new BMap.LocalSearch(e,r);o.search(n)}},e.prototype.handleSyncOption=function(t){this.handleInfoWindow(t),this.handleControls(t)},e.prototype.handleControls=function(t){var e=this.config.controls;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i]||{},o=BMap[i];o&&t.map.addControl(new o(n))}},e.prototype.handleInfoWindow=function(t){var e=t.cfg.info;if(e){var i=new BMap.InfoWindow(e.content,e);t.marker.addEventListener("click",function(){t.map.openInfoWindow(i,t.point)})}},e.prototype.traverseAndConcat=function(t){var e="";for(var i in t)if(t.hasOwnProperty(i)&&t[i])e+=t[i];return e},e.prototype.append=function(){if(!this.config.ak)return void console.error("请配置服务密钥（ak）");var t=document.createElement("script");t.src=this.mapUrl,document.body.appendChild(t)},i.prototype.jsonParse=function(t){try{return JSON.parse(t)}catch(t){return console.error(t),!1}},i.prototype.firstInviewCallback=function(){var t=this.element.querySelector('script[type="application/json"]'),i=this.jsonParse(t.textContent);i&&new e(this.element,i).show()},i}),define("mip-map",["mip-map/mip-map"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-map",e,"mip-map img{width:auto}")}if(window.MIP)require(["mip-map"],function(e){t(window.MIP,e)});else require(["mip","mip-map"],t)}()}});